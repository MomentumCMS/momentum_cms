language: ruby
env:
  - DB=sqlite
  - DB=mysql
  - DB=postgresql
before_script:
  - mysql -e 'create database momentum_cms_test'
  - psql -c 'create database momentum_cms_test' -U postgres
  - rake db:migrate
script:
  - rake test
rvm:
  - 1.9.3
  - 2.0.0
  - 2.1
gemfile:
  - test/gemfiles/Gemfile.rails.4.0
  - test/gemfiles/Gemfile.rails.4.1
  - test/gemfiles/Gemfile.rails.master
matrix:
  fast_finish: true
  allow_failures:
    - gemfile: test/gemfiles/Gemfile.rails.master